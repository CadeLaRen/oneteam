<?xml version="1.0"?>

<!DOCTYPE bindings [
  <!ENTITY % globalDTD SYSTEM "chrome://global/locale/global.dtd">
  %globalDTD;
]>

<bindings xmlns="http://www.mozilla.org/xbl"
    xmlns:xbl="http://www.mozilla.org/xbl"
    xmlns:html="http://www.w3.org/1999/xhtml"
    xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <binding id="tab" extends="chrome://global/content/bindings/tabbox.xml#tab" display="xul:box">
    <resources>
      <stylesheet src="chrome://messenger/skin/tabwithclosebutton.css"/>
    </resources>
<!-- #ifdef XULAPP -->
    <content chromedir="&locale.dir;" class="tab-content" flex="100">
<!-- #else
    <content class="tab-content" flex="100">
//#endif -->
      <xul:hbox class="tab-middle box-inherit" xbl:inherits="align,dir,pack,orient,selected"
          flex="1">
        <xul:image class="tab-icon" xbl:inherits="validate,src=image"/>
        <xul:label class="tab-text" crop="end" xbl:inherits="value=label,accesskey,crop,disabled"
          flex="1"/>
      </xul:hbox>
      <xul:toolbarbutton tabindex="-1" class="closebutton"/>
    </content>

    <implementation>
      <constructor><![CDATA[
        this._closebutton = document.getAnonymousElementByAttribute(this, "class", "closebutton");
      ]]></constructor>
    </implementation>

    <handlers>
      <handler event="mousedown" button="0" phase="capturing"><![CDATA[
        if (event.originalTarget == this._closebutton) {
          event.stopPropagation();
        }
      ]]></handler>
    </handlers>
  </binding>
</bindings>
