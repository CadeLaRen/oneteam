DEPTH=..
topsrcdir=@top_srcdir@
objdir=@objdir@
srcdir=.
VPATH=.
otdir=@otdir@
ottdir=@ottdir@

include $(ottdir)/config.mk

MODULE = oneteam
LIBRARY_NAME = oneteam
#NO_DIST_INSTALL=1
FORCE_SHARED_LIB=1

REQUIRES= \
	xpcom \
	string \
	pipnss \
	dom \
	necko \
	expat \
	content \
	htmlparser \
	xulapp \
	caps \
	$(OT_EXTRA_SHARED_REQS) \
	$(NULL)

IS_COMPONENT = 1

CPPSRCS = \
	otModule.cpp \
	$(NULL)

LOCAL_INCLUDES = \
	-I$(otdir)/src/idle \
	-I$(otdir)/src/systray \
	-I$(otdir)/src/dns \
	-I$(otdir)/src/ice \
	-I$(otdir)/src/audio \
	-I$(otdir)/src/rtp \
	-I$(otdir)/src/codecs \
	-I$(otdir)/libs/libilbc \
	-I$(otdir)/src/jnrelay \
	-I$(otdir)/src/osxbadge \
	$(NULL)

SHARED_LIBRARY_LIBS += \
	$(OT_EXTRA_SHARED_LIBS) \
	$(NULL)

OS_LIBS += $(OT_EXTRA_SHARED_OS_LIBS)

ifdef GNU_LD2
	EXTRA_DSO_LDOPTS += \
	    -Wl,--as-needed -Wl,--gc-sections -Wl,--no-undefined \
	    $(NULL)
endif

EXTRA_DSO_LDOPTS += \
	$(XPCOM_GLUE_LDOPTS) \
	$(XPCOM_FROZEN_LDOPTS) \
	$(OT_LDOPTS) \
	$(LIBS_DIR) \
	$(EXTRA_DSO_LIBS) \
	$(MOZ_COMPONENT_LIBS) \
	$(OT_EXTRA_DYN_LIBS) \
	$(NULL)

include $(ottdir)/rules.mk
